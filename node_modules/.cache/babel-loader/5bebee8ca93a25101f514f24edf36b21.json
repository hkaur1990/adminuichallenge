{"ast":null,"code":"import _slicedToArray from\"C:/Users/arpit/OneDrive/Desktop/adminuichallenge/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import UserData from'./userData';import\"./dataTable.css\";import Pagination from'./Pagination';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var DataTable=function DataTable(_ref){var members=_ref.members,onCheck=_ref.onCheck,onDelete=_ref.onDelete,onGroupDelete=_ref.onGroupDelete,onEdit=_ref.onEdit;var rowLimit=10;var pageLimit=5;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),currentPage=_useState2[0],setCurrentPage=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),selectAll=_useState4[0],setSelectAll=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),rowSelected=_useState6[0],setRowSelected=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),token=_useState8[0],setToken=_useState8[1];var _useState9=useState(Math.ceil((members===null||members===void 0?void 0:members.length)/rowLimit)),_useState10=_slicedToArray(_useState9,2),totalPages=_useState10[0],setTotalPages=_useState10[1];var _useState11=useState(members.slice((currentPage-1)*rowLimit,(currentPage-1)*rowLimit+rowLimit)),_useState12=_slicedToArray(_useState11,2),data=_useState12[0],setData=_useState12[1];var currentData=function currentData(){var begin=(currentPage-1)*rowLimit;var end=begin+rowLimit;setData(members.slice(begin,end));};useEffect(function(){currentData();},[members,currentPage]);useEffect(function(){if(currentPage>totalPages&&totalPages!==0){setCurrentPage(totalPages);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[members===null||members===void 0?void 0:members.length,totalPages]);useEffect(function(){setTotalPages(Math.ceil((members===null||members===void 0?void 0:members.length)/rowLimit));setRowSelected(members.reduce(function(i,member){return i||member.isChecked;},false));},[members]);useEffect(function(){setSelectAll(data.reduce(function(i,member){return i&&member.isChecked;},true));// eslint-disable-next-line react-hooks/exhaustive-deps\n},[currentPage,members,data]);var handleSelectAll=function handleSelectAll(e){if(e.target.checked)data===null||data===void 0?void 0:data.map(function(row){return!row.isChecked&&onCheck(row.id);});else data===null||data===void 0?void 0:data.map(function(row){return row.isChecked&&onCheck(row.id);});};var handleRowSelect=function handleRowSelect(id){return onCheck(id);};var handleRowDelete=function handleRowDelete(id){return onDelete(id);};var handleGroupDelete=function handleGroupDelete(){return onGroupDelete();};var handleRowEdit=function handleRowEdit(row){return onEdit(row);};var handleEditLock=function handleEditLock(id){return setToken(id);};return/*#__PURE__*/_jsx(_Fragment,{children:(members===null||members===void 0?void 0:members.length)>0?/*#__PURE__*/_jsxs(\"div\",{className:\"main-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"table-container\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",onChange:handleSelectAll,checked:rowSelected?selectAll?\"checked\":\"\":\"\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"data\",children:\"Name\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"data\",children:\"Email\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"data\",children:\"Role\"})}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data===null||data===void 0?void 0:data.map(function(member){return/*#__PURE__*/_jsx(UserData,{row:member,onRowSelect:handleRowSelect,onRowDelete:handleRowDelete,onRowEdit:handleRowEdit,onClickEdit:handleEditLock,token:token},member.id);})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"deletebtn\".concat(!rowSelected?\" disabled\":\"\"),disabled:!rowSelected?\"disabled\":\"\",onClick:handleGroupDelete,children:\"Delete seleted\"}),totalPages>1&&/*#__PURE__*/_jsx(Pagination,{currentPage:currentPage,limit:pageLimit,totalPages:totalPages,setCurrentPage:setCurrentPage})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"fallback\",children:\"No data found\"})});};export default DataTable;","map":{"version":3,"names":["React","useEffect","useState","UserData","Pagination","DataTable","members","onCheck","onDelete","onGroupDelete","onEdit","rowLimit","pageLimit","currentPage","setCurrentPage","selectAll","setSelectAll","rowSelected","setRowSelected","token","setToken","Math","ceil","length","totalPages","setTotalPages","slice","data","setData","currentData","begin","end","reduce","i","member","isChecked","handleSelectAll","e","target","checked","map","row","id","handleRowSelect","handleRowDelete","handleGroupDelete","handleRowEdit","handleEditLock"],"sources":["C:/Users/arpit/OneDrive/Desktop/adminuichallenge/src/components/dataTable.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport UserData from './userData'\nimport \"./dataTable.css\"\nimport Pagination from './Pagination';\n\n\nconst DataTable = ({ members, onCheck, onDelete, onGroupDelete, onEdit }) => {\n  const rowLimit = 10;\n  const pageLimit = 5;\n  const [currentPage, setCurrentPage] = useState(1);\n  const [selectAll, setSelectAll] = useState(false);\n  const [rowSelected, setRowSelected] = useState(false);\n  const [token, setToken] = useState(null);\n  const [totalPages, setTotalPages] = useState(Math.ceil(members?.length / rowLimit));\n  const [data, setData] = useState(members.slice((currentPage - 1) * rowLimit, (currentPage - 1) * rowLimit + rowLimit))\n\n  const currentData = () => {\n    const begin = (currentPage - 1) * rowLimit;\n    const end = begin + rowLimit;\n    setData(members.slice(begin, end))\n  }\n\n  useEffect(() => {\n    currentData();\n  }, [members, currentPage])\n\n  useEffect(() => {\n    if (currentPage > totalPages && totalPages !== 0) {\n      setCurrentPage(totalPages)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [members?.length, totalPages])\n\n  useEffect(() => {\n    setTotalPages(Math.ceil(members?.length / rowLimit));\n    setRowSelected(members.reduce((i, member) => i || member.isChecked, false));\n  }, [members])\n\n  useEffect(() => {\n    setSelectAll(data.reduce((i, member) => i && member.isChecked, true));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentPage, members, data])\n\n\n  const handleSelectAll = (e) => {\n    if (e.target.checked)\n      data?.map(row => !row.isChecked && onCheck(row.id));\n    else\n      data?.map(row => row.isChecked && onCheck(row.id));\n  }\n\n  const handleRowSelect = (id) => onCheck(id);\n\n  const handleRowDelete = (id) => onDelete(id);\n\n  const handleGroupDelete = () => onGroupDelete();\n\n  const handleRowEdit = (row) => onEdit(row);\n\n  const handleEditLock = (id) => setToken(id);\n\n  return (\n    <>\n      {members?.length > 0 ?\n        <div className=\"main-container\">\n          <div className=\"table-container\">\n            <table>\n              <thead>\n                <tr>\n                  <th><input type=\"checkbox\"\n                    onChange={handleSelectAll}\n                    checked={rowSelected ? selectAll ? \"checked\" : \"\" : \"\"} /></th>\n                  <th><div className=\"data\">Name</div></th>\n                  <th><div className=\"data\">Email</div></th>\n                  <th><div className=\"data\">Role</div></th>\n                  <th>Action</th>\n                </tr>\n              </thead>\n              <tbody>\n                {\n                  data?.map(member =>\n                    <UserData key={member.id}\n                      row={member}\n                      onRowSelect={handleRowSelect}\n                      onRowDelete={handleRowDelete}\n                      onRowEdit={handleRowEdit}\n                      onClickEdit={handleEditLock}\n                      token={token}\n                    />\n                  )\n                }\n              </tbody>\n            </table>\n          </div>\n          <div className=\"footer\">\n            <button className={`deletebtn${!rowSelected ? \" disabled\" : \"\"}`} disabled={!rowSelected ? \"disabled\" : \"\"} onClick={handleGroupDelete}>Delete seleted</button>\n            {\n              totalPages > 1 &&\n              <Pagination\n                currentPage={currentPage}\n                limit={pageLimit}\n                totalPages={totalPages}\n                setCurrentPage={setCurrentPage}\n              />\n            }\n          </div>\n        </div>\n        : <div className=\"fallback\">\n          No data found\n          \n        </div>\n      }\n    </>\n  )\n}\n\nexport default DataTable"],"mappings":"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"},"metadata":{},"sourceType":"module"}