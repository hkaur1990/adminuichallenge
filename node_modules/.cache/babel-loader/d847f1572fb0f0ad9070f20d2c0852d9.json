{"ast":null,"code":"import _toConsumableArray from\"C:/Users/arpit/OneDrive/Desktop/adminuichallenge/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/arpit/OneDrive/Desktop/adminuichallenge/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/arpit/OneDrive/Desktop/adminuichallenge/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/arpit/OneDrive/Desktop/adminuichallenge/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\arpit\\\\OneDrive\\\\Desktop\\\\adminuichallenge\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect,useState}from'react';import axios from'axios';import'./App.css';import DataTable from'./components/dataTable';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),members=_useState2[0],setMembers=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),filteredMembers=_useState4[0],setFilteredMembers=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),searchText=_useState6[0],setSearchText=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isLoading=_useState8[0],setLoading=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isError=_useState10[0],setIsError=_useState10[1];var performApiCall=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.next=3;return axios.get(\"https://geektrust.s3-ap-southeast-1.amazonaws.com/adminui-problem/members.json\").then(function(response){setLoading(false);setIsError(false);setMembers(response.data.map(function(row){return _objectSpread(_objectSpread({},row),{},{isChecked:false});}));}).catch(function(error){setLoading(false);setIsError(true);});case 3:return _context.abrupt(\"return\",_context.sent);case 4:case\"end\":return _context.stop();}}},_callee);}));return function performApiCall(){return _ref.apply(this,arguments);};}();useEffect(function(){performApiCall();},[]);useEffect(function(){if((searchText===null||searchText===void 0?void 0:searchText.length)>0){setFilteredMembers(members===null||members===void 0?void 0:members.filter(function(member){var _member$name,_member$email,_member$role;if((_member$name=member.name)!==null&&_member$name!==void 0&&_member$name.toLowerCase().includes(searchText.toLowerCase())||(_member$email=member.email)!==null&&_member$email!==void 0&&_member$email.toLowerCase().includes(searchText.toLowerCase())||(_member$role=member.role)!==null&&_member$role!==void 0&&_member$role.toLowerCase().includes(searchText.toLowerCase())){return member;}}));}else{setFilteredMembers(members);}},[searchText,members]);var handleSelect=function handleSelect(id){var tempMembers=_toConsumableArray(members);tempMembers.forEach(function(member){if(member.id===id){member.isChecked=!member.isChecked;}});setMembers(tempMembers);};var handleDelete=function handleDelete(id){var tempMembers=_toConsumableArray(members);tempMembers=tempMembers.filter(function(member){return member.id!==id;});setMembers(tempMembers);};var handleGroupDelete=function handleGroupDelete(){var tempMembers=_toConsumableArray(members);tempMembers=tempMembers.filter(function(member){return!member.isChecked;});setMembers(tempMembers);};var handleEdit=function handleEdit(row){var tempMembers=_toConsumableArray(members);tempMembers=tempMembers.map(function(member){if(member.id===row.id){return Object.assign(member,row);}return member;});setMembers(tempMembers);};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"search-container\",children:/*#__PURE__*/_jsx(\"input\",{className:\"search-bar\",name:\"search\",value:searchText,onChange:function onChange(e){return setSearchText(e.target.value);},placeholder:\"Search by name, email or role\"})}),isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"spinner-wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"})}):isError?/*#__PURE__*/_jsx(\"div\",{className:\"fallback\",children:\"Unable to fetch data at the moment\"}):filteredMembers&&/*#__PURE__*/_jsx(DataTable,{members:filteredMembers,onCheck:handleSelect,onDelete:handleDelete,onGroupDelete:handleGroupDelete,onEdit:handleEdit})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","axios","DataTable","App","members","setMembers","filteredMembers","setFilteredMembers","searchText","setSearchText","isLoading","setLoading","isError","setIsError","performApiCall","get","then","response","data","map","row","isChecked","catch","error","length","filter","member","name","toLowerCase","includes","email","role","handleSelect","id","tempMembers","forEach","handleDelete","handleGroupDelete","handleEdit","Object","assign","e","target","value"],"sources":["C:/Users/arpit/OneDrive/Desktop/adminuichallenge/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport './App.css';\nimport DataTable from './components/dataTable';\n\nfunction App() {\n  const [members, setMembers] = useState(null);\n  const [filteredMembers, setFilteredMembers] = useState(null);\n  const [searchText, setSearchText] = useState('');\n  const [isLoading, setLoading] = useState(false);\n  const [isError, setIsError] = useState(false);\n\n  const performApiCall = async () => {\n    setLoading(true);\n    return await axios.get(\"https://geektrust.s3-ap-southeast-1.amazonaws.com/adminui-problem/members.json\")\n      .then((response => {\n        setLoading(false);\n        setIsError(false);\n        setMembers(response.data.map((row) => ({ ...row, isChecked: false })));\n      }))\n      .catch(error => {\n        setLoading(false)\n        setIsError(true);\n      })\n  }\n\n  useEffect(() => {\n    performApiCall()\n  }, [])\n\n  useEffect(() => {\n    if (searchText?.length > 0) {\n      setFilteredMembers(members?.filter(member => {\n        if (member.name?.toLowerCase().includes(searchText.toLowerCase())\n          || member.email?.toLowerCase().includes(searchText.toLowerCase())\n          || member.role?.toLowerCase().includes(searchText.toLowerCase())\n        ) {\n          return member;\n        }\n      }))\n    }\n    else {\n      setFilteredMembers(members)\n    }\n  }, [searchText, members]);\n\n  const handleSelect = (id) => {\n    let tempMembers = [...members]\n    tempMembers.forEach(member => {\n      if (member.id === id) {\n        member.isChecked = !member.isChecked;\n      }\n    })\n    setMembers(tempMembers)\n  }\n\n  const handleDelete = (id) => {\n    let tempMembers = [...members]\n    tempMembers = tempMembers.filter(member => member.id !== id)\n    setMembers(tempMembers)\n  }\n\n  const handleGroupDelete = () => {\n    let tempMembers = [...members]\n    tempMembers = tempMembers.filter(member => !member.isChecked)\n    setMembers(tempMembers)\n  }\n\n  const handleEdit = (row) => {\n    let tempMembers = [...members]\n    tempMembers = tempMembers.map(member => {\n      if (member.id === row.id) {\n        return Object.assign(member, row)\n      }\n      return member\n    })\n    setMembers(tempMembers)\n  }\n\n  return (\n    <div className=\"container\">\n      <div className=\"search-container\">\n        <input className=\"search-bar\"\n          name=\"search\"\n          value={searchText}\n          onChange={(e) => setSearchText(e.target.value)}\n          placeholder=\"Search by name, email or role\" />\n      </div>\n      {\n        isLoading ?\n          <div className=\"spinner-wrapper\">\n            <div className=\"spinner\"></div>\n          </div>\n          : isError ?\n            <div className=\"fallback\">\n              Unable to fetch data at the moment\n            </div>\n            : filteredMembers && <DataTable\n              members={filteredMembers}\n              onCheck={handleSelect}\n              onDelete={handleDelete}\n              onGroupDelete={handleGroupDelete}\n              onEdit={handleEdit}\n            />\n      }\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module"}